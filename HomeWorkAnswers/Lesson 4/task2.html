<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<script>
			let res, resd;
			let i = 1;
			let quest;
			let success = 0;
			let unsuccess = 0;
			let count = 0;
			let a, b, s;
			let attempt = 3;

			const sign = ["+", "-", "*", "/"];

			function randomize(n1, n2) {
				//функція пошуку випадкового значення. Параметр n1-максимальне значення, n2=0 - використовувати 0, n2=1 - не використовувати 0
				let rnd = Math.floor(Math.random() * n1) + n2;
				return rnd;
			}

			function getValue(message) {
				//функція перевірки правильності введення
				while (true) {
					let value = prompt(message);
					let isValid = !isNaN(value) && value !== "" && value !== null && value > 0;
					if (isValid) return Number(value);
				}
			}

			function newGenRound() {
				//функція генерування нового виразу для обчислення
				a = randomize(10, 0);
				b = randomize(10, 0);
				s = randomize(4, 1);
				console.log("num a=" + a + " num a=" + b + " sign=" + s);

				switch (sign[s - 1]) {
					case "+":
						res = a + b;
						console.log("1 " + s + " " + a + "+" + b + "=" + res);
						break;
					case "-":
						res = a - b;
						console.log("2 " + s + " " + a + "-" + b + "=" + res);
						break;
					case "*":
						res = a * b;
						console.log("3  " + s + " " + a + "*" + b + "=" + res);
						break;
					case "/":
						res = a / b;
						console.log("4" + s + " " + a + "/" + b + "=" + res + "(" + res + ")");
						break;
				}
				res = res.toFixed(2);
			}

			newGenRound();

			let rounds = getValue("Виберіть кількість раундів: ");
			while (count < rounds) {
				console.log(`count=${count}, rounds=${rounds}`);
				count++;
				quest = prompt(
					`Раунд № ${count} Спроба ${attempt - 1} 
					\n Дайте відповідь на питання або натисніть "q" для виходу 
					\n Скільки буде  ${a} ${sign[s - 1]} ${b} = ?`,
				);
				if (quest == "q") {
					console.log("Натиснута кнопка 'q' - Вихід з гри за вибором ігрока");
					break;
				}

				quest = Number(quest).toFixed(2);

				if (quest == res) {
					alert(`Вгадали. Вказали ${quest}. Правильна відповідь ${res}`);
					success++;
					break;
				} else {
					for (i = 1; i < attempt; i++) {
						alert(`Невгадали.  \n Спроба № ${i}. Залишилось спроб ${attempt - i}`);
						quest = prompt(`Повторіть введення для виразу ${a} ${sign[s - 1]} ${b} =`);
						quest = Number(quest).toFixed(2);
					}
					unsuccess++;

					alert(`Невгадали. Залишилось спроб ${attempt - i} з ${attempt} Правильна відповідь ${res}`);
				}

				newGenRound();
			}

			alert(`Кінець. Зіграно раундів=${count}. Вгадано=${success}. Невгадано=${unsuccess}`);
		</script>
	</body>
</html>
